@use 'sass:math';
@import './variables';
@import './mixins';
@import './utilities';
@import './animations';
@import url('https://fonts.googleapis.com/css2?family=Syne:wght@400..800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap');

* {
  box-sizing: border-box;
}
html,
body {
  height: 100%;
}
body {
  margin: 0;
  font-family: 'Syne', 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
  background: var(--c-bg);
  color: var(--c-text);
}
img {
  max-width: 100%;
  height: auto;
}
main {
  display: block;
}

h1,
h2,
h3,
h4,
h5,
h6,
p,
span {
  font-family: 'Syne', 'Noto Sans KR', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
}

/* 링크 */
a {
  color: inherit;
  text-decoration: none;
}
button,
input,
textarea {
  font: inherit;
  color: inherit;
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  padding: 10px 12px;
}
button {
  cursor: pointer;
  background: linear-gradient(90deg, var(--c-grad-1), var(--c-grad-2));
  color: #0a0a0f;
  border: none;
}
label {
  display: grid;
  gap: 8px;
}
section {
  scroll-margin-top: 80px;
}

/* base.scss 하단에 */
:root,
[data-theme='dark'] {
  --c-bg: #0c0c10;
  --c-text: #e9e9ee;
}
[data-theme='light'] {
  --c-bg: #f7f7fb;
  --c-text: #111218;
}

// === Starfield ===
// 조절 포인트
$area: 3000; // 별을 뿌릴 가상 캔버스 크기(px)
$n-tiny: 1060; // 작은 별 개수
$n-small: 260; // 중간 별 개수
$n-medium: 90; // 큰 별 개수

@keyframes twinkle {
  0%,
  100% {
    opacity: 0.55;
  }
  50% {
    opacity: 1;
  }
}

@keyframes drift {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-40px);
  } // 아주 살짝 떠오르는 느낌
}

// box-shadow로 별 좌표 생성
@mixin make-stars($count, $size, $blur: 0) {
  $shadows: ();
  @for $i from 1 through $count {
    $x: random($area) * 1px;
    $y: random($area) * 1px;
    $shadows: append($shadows, #{$x} #{$y} #eee, comma);
  }

  content: '';
  position: absolute;
  inset: -#{$area/2}px; // 화면 밖까지 넉넉히 깔아 깜빡임/드리프트 시 빈 공간 방지
  width: $size;
  height: $size;
  background: transparent;
  border-radius: 50%;
  box-shadow: $shadows;
  // 살짝 번짐이 있는 별 (필요 없으면 지워도 OK)
  @if $blur > 0 {
    filter: drop-shadow(0 0 $blur #eee);
  }
}

// 검은 배경
body {
  background: #000;
  min-height: 100dvh;
}

// 밤하늘 레이어 (화면 전체 고정)
.starfield {
  position: fixed;
  inset: 0;
  pointer-events: none; // 클릭/스크롤에 간섭 X
  z-index: 1; // 가장 뒤
  overflow: hidden;

  // 별 레이어 3종 (깜빡임/속도 다르게)
  &::before {
    @include make-stars($n-tiny, 1px, 0px);
    animation: twinkle 2.2s ease-in-out infinite alternate, drift 120s linear infinite alternate;
    opacity: 0.5;
  }
  &::after {
    @include make-stars($n-small, 2px, 1px);
    animation: twinkle 3.4s ease-in-out infinite alternate, drift 150s linear infinite alternate;
    opacity: 0.45;
  }

  // 추가 레이어(큰 별)
  .starfield__layer {
    position: absolute;
    inset: 0;
    &::before {
      @include make-stars($n-medium, 3px, 2px);
      animation: twinkle 4.8s ease-in-out infinite alternate, drift 180s linear infinite alternate;
      opacity: 0.3;
      content: '';
    }
  }
}

@keyframes moveInCircle {
  0% {
    transform: rotate(0deg);
  }
  50% {
    transform: rotate(180deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes moveVertical {
  0% {
    transform: translateY(-50%);
  }
  50% {
    transform: translateY(50%);
  }
  100% {
    transform: translateY(-50%);
  }
}

@keyframes moveHorizontal {
  0% {
    transform: translateX(-50%) translateY(-10%);
  }
  50% {
    transform: translateX(50%) translateY(10%);
  }
  100% {
    transform: translateX(-50%) translateY(-10%);
  }
}

.gradient-bg {
  width: 100%;
  height: 100vh;
  position: absolute;
  z-index: -1;
  overflow: hidden;
  background: linear-gradient(40deg, var(--color-bg1), black);
  top: 0;
  left: 0;

  svg {
    position: fixed;
    top: 0;
    left: 0;
    width: 0;
    height: 0;
  }

  .gradients-container {
    filter: url(#goo) blur(40px);
    width: 100%;
    height: 100%;
  }

  .g1 {
    position: absolute;
    background: radial-gradient(circle at center, rgba(var(--color1), 0.8) 0, rgba(var(--color1), 0) 50%) no-repeat;
    mix-blend-mode: var(--blending);

    width: var(--circle-size);
    height: var(--circle-size);
    top: calc(50% - var(--circle-size) / 2);
    left: calc(50% - var(--circle-size) / 2);

    transform-origin: center center;
    animation: moveVertical 30s ease infinite;

    opacity: 1;
  }

  .g2 {
    position: absolute;
    background: radial-gradient(circle at center, rgba(var(--color2), 0.8) 0, rgba(var(--color2), 0) 50%) no-repeat;
    mix-blend-mode: var(--blending);

    width: var(--circle-size);
    height: var(--circle-size);
    top: calc(50% - var(--circle-size) / 2);
    left: calc(50% - var(--circle-size) / 2);

    transform-origin: calc(50% - 400px);
    animation: moveInCircle 20s reverse infinite;

    opacity: 1;
  }

  .g3 {
    position: absolute;
    background: radial-gradient(circle at center, rgba(var(--color3), 0.8) 0, rgba(var(--color3), 0) 50%) no-repeat;
    mix-blend-mode: var(--blending);

    width: var(--circle-size);
    height: var(--circle-size);
    top: calc(50% - var(--circle-size) / 2 + 200px);
    left: calc(50% - var(--circle-size) / 2 - 500px);

    transform-origin: calc(50% + 400px);
    animation: moveInCircle 40s linear infinite;

    opacity: 1;
  }

  .g4 {
    position: absolute;
    background: radial-gradient(circle at center, rgba(var(--color4), 0.8) 0, rgba(var(--color4), 0) 50%) no-repeat;
    mix-blend-mode: var(--blending);

    width: var(--circle-size);
    height: var(--circle-size);
    top: calc(50% - var(--circle-size) / 2);
    left: calc(50% - var(--circle-size) / 2);

    transform-origin: calc(50% - 200px);
    animation: moveHorizontal 40s ease infinite;

    opacity: 0.7;
  }

  .g5 {
    position: absolute;
    background: radial-gradient(circle at center, rgba(var(--color5), 0.8) 0, rgba(var(--color5), 0) 50%) no-repeat;
    mix-blend-mode: var(--blending);

    width: calc(var(--circle-size) * 2);
    height: calc(var(--circle-size) * 2);
    top: calc(50% - var(--circle-size));
    left: calc(50% - var(--circle-size));

    transform-origin: calc(50% - 800px) calc(50% + 200px);
    animation: moveInCircle 20s ease infinite;

    opacity: 1;
  }

  .interactive {
    position: absolute;
    background: radial-gradient(
        circle at center,
        rgba(var(--color-interactive), 0.8) 0,
        rgba(var(--color-interactive), 0) 50%
      )
      no-repeat;
    mix-blend-mode: var(--blending);

    width: 100%;
    height: 100%;
    top: -50%;
    left: -50%;

    opacity: 0.7;
  }
}

body::-webkit-scrollbar {
  width: 5px;
}

body::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, var(--c-grad-1) 0%, var(--color-bg1) 100%);
  border-radius: 10px;
}

body::-webkit-scrollbar-track {
  background-color: var(--c-grad-1);
}
